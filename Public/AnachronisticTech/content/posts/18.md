---
date: 21/10/2019
summary: Last weekend was the University of Warwick Game Design Society's first GameJam of the year with the theme of "reflection". Fed up of going to GameJams and being unable to make anything at all, I set myself the goal of building a prototype of a game during the Jam that I could show off at the next society showcase event.
type: project
tags: unreal;programming;mirror
---

# What have I been developing this week? - The Mirror (PC)

> "You can't see the world through a mirror." - Avril Lavigne

One of the hallmark events of the University of Warwick Game Design Society is the GameJam. These events - typically 48 hours long over the course of a weekend during term-time - are excellent opportunities for people to get together, have fun, and spend a weekend developing games around a specific theme. I've been to a few of the Jams held by the society since I became a member two years ago, but I confess I've never made a game of my own at one of these events. Since I started programming quite late relative to most other coders in the group, I never learned how to use any of the many game engines and frameworks out there, and, while I could direct my efforts towards a board or card game, somehow I'm not convinced I could pull it off. To change all this, I resolved to learn Unreal Engine 4 over the summer so I could finally attend a Jam and build something to show off.

I started out by enrolling in an online course on Udemy for Unreal game development in C++. For anyone wondering why I chose Unreal over Unity (quite a popular tool among amateur and professional developers alike), I thought C++ would be more useful to me than C# in the long term, and that Unreal might be more impressive than Unity to future employers. While my third year studies thus far would seem to have proven me right on the former, I will probably have to wait and see if time proves me right on the latter. I spent much of my summer working through the course building little games to learn how Unreal works. We built a word-guessing game, a little "escape the room" style puzzle, and a tank fighting arena, complete with terrain, user interfaces, and AI-powered tanks bent on our destruction. It was an enjoyable and informative course, but I was unsure whether I had been adequately prepared to build a game of my own in a short space of time without much help or guidance. The only way to test this was to actually build a game of my own and see what I could achieve. 

Quite fortunately, the first Jam of the year was scheduled early in the term: the weekend of Week 2. This meant university work hadn't ramped up yet, so I could afford to spend the whole weekend on the Jam without affecting my studies. Starting from 5PM on Friday 11th and ending at 5PM on Sunday 13th, the October GameJam theme was "reflection". Due to study constraints, I arrived at the Jam a few hours after it had started, so I managed to sneak in a look at what others were working on; there was a game about personal reflection on one's actions, one had lasers reflecting and bouncing around the map, and there was also a card game about attacking other players and reflecting their attacks on you to other players. With the clock ticking, I decided to look at the theme in the most literal way I could: "What makes reflections? A mirror!" I decided to build a game around a mechanic where the world is reflected by a mirror and the player has to solve puzzles to reach a goal.

Since the point of the GameJam isn't to make a full, polished game, I aimed to have at least some decent-looking prototype done by the end of the 48 hours. I started by making a mirror using a reflective material; this was a plane with chrome-like material made in the Unreal material editor. The result was less than impressive. After briefly looking online, I found that reflective materials are really only feasible using the new real-time ray tracing features on the top-end Nvidia graphics card (which I don't have), and that the alternative - basically, an invisible camera and a screen representing the mirror - doesn't look great and the performance is rather poor. Things were not off to a flying start...

I decided it was probably better to implement reflections manually. The new mirror I envisioned would just be a pane of glass, and an object in the world would have a corresponding reflection spawned on the opposite side of the glass such that the the pair had their positions and orientations tied together somehow. I created two C++ classes to represent the pair, and before long, I had a system where I could place an object in the level and the reflection would spawn at runtime. Using some vector maths from Wolfram Alpha about reflections, I made it so the reflection would spawn in the right place relative to the object and mirror, and even move when the object moved using the correct rotation. The mechanic was coming together, but I was still uncertain of what the point of the game would be. Sure, the mirror was a cool effect, but what was its purpose? I had been working until Saturday morning on this, so I decided I'd sleep on it and return to the Jam when I woke up in the mid-afternoon.

After getting some much needed rest and food, I headed back to the Jam (though not until after a whole other story involving a grumpy housemate with a punctured car tyre) to continue working, armed with a new game concept. I reasoned that, since reflections were being spawned as objects on the other side of the glass, a good puzzle idea might be that not all objects in the world are reflected, and two players have to work together to solve the puzzle. Since I had recently begun a course on Unreal local multiplayer games, the two-player part didn't seem too daunting, and I had already built a few different puzzle mechanics from the course I did over the summer. I ported over an object-grabbing system, moving platforms with pressure plates, and integrated them with the object-reflection pair. By Sunday morning I had a little level full of puzzle mechanic tests whirring away so I could test that each one worked. Despite the fact that there was no full puzzle yet, I knew I was on to something.

## No Rest for the Wicked

Due to a mix-up with the bus timetables, I didn't end up going home between Saturday and Sunday; instead, I dozed for a couple of hours on some really uncomfortable chairs using my folded overcoat as a makeshift pillow. So, with sleep quality through the floor, and exhaustion on the rise since I stayed overnight to work and guard the other participants' possessions, I was not feeling particularly great about implementing a puzzle level. Instead, I added a main menu screen, and attempted to get the co-op part functioning. Things seemed to be working at first, but then I encountered a strange quirk of Unreal's networking system: it's entirely server-client based. The system is designed to make multiplayer connections simple, and the central server to which all the clients are connected dictates the current state of the world. This would be great if I didn't have multiple players moving stuff around and having to communicate that to the server. Between exhaustion and pretty poor results online as to how to fix this, I got to the end of the GameJam with a prototype that wasn't actually playable. If I hadn't been so tired, I probably would have felt a little upset that I failed to reach my primary goal.

Despite my apparent failure, my spirits were lifted when people crowded around to see what I'd managed over the weekend. People liked how pretty it looked (thanks Unreal!) and thought the mirror mechanic was intriguing both in terms of gameplay and regarding the theme of the Jam. Perhaps I had admitted defeat too early? A lot of the people who stopped by at the end of and after the Jam said they were looking forward to seeing it at the showcase on Thursday, so I resolved I would have a demonstrable prototype by then, even though the Jam was now over. All I had to do was fix networking and get a level designed. Surely I could do that after recovering from sleep deprivation, I reasoned.

## The Git Calamity

While Monday and Tuesday are my busiest days at university this term, Wednesday and Thursday are almost completely empty. Now relaxed, rested, and back at home, I decided to get cracking again on the game by cloning the GitHub repository that I had started on my laptop to my desktop where I had more screen space, better peripherals, and comfy chair. Cloning repositories from GitHub should be quite painless, but for some reason, this repository wouldn't clone. Some quick online searching suggested I should increase the size of my post buffer - the memory allocated to receiving data from a remote server. While this fixed the problem, I remembered another Unreal repository also had the same issue. I tried to clone that one too, but it was unfortunately still broken. My housemates and I eventually narrowed down the problem to our Virgin Media router and its Child Safe and Virus Safe settings; disabling those seemed to resolve the cloning issue. However, on opening the projects, I discovered both were damaged in other ways. The Tank Battle game was pretty much a lost cause, as far as I could tell, and the Mirror game seemed to have large chunks of the map missing. I made sure I'd pushed and pulled all my changes properly, but the repositories were beyond repair. On top of that, my entire Wednesday was now gone, and I had made no progress at all.

Thursday was the day of the showcase, and - for me - it was all hands on deck. With Wednesday being a complete bust, I spent my last five hours before the showcase trying to finish things off. First on the list was a trigger volume (like the pressure plates) that would end the game when both players were in it, signifying the end of the level. Getting it set up was quite easy since it was mostly code I had written before for the pressure plates, but the trick was only counting players and no other objects as valid things to count. Once I was satisfied it was working, I briefly tried to fix the physics so that 1m cubes of brick didn't go flying around the map like balloons, but I realised I would probably end up breaking more things than I'd fix, and the balloon-like physics kind of added to the charm of the game anyway... 

Instead, I decided to rework the multiplayer: I realised the networking was not working out. Even if I could fix the client-to-server communication, I'd still have to deal with other issues, so I decided to go with a split-screen mode instead. While forum posts were incredibly unhelpful on this, I found a YouTube video which explained how to get it working within a minute. Though everything looked stable, I couldn't test the second player controls since I had left my controller at home. The first test would have to be at the showcase; a real trial by fire. The final two hours were spent putting together a simple two-stage puzzle level I had drawn on some paper with the components I'd implemented up to this stage. Once that was done, I packaged it all into an executable with about 25 minutes to spare before the big reveal.

## Final Reflections

I was very proud to stand up and present The Mirror to the society that night. Watching the game being played by two people who had only seen it in its early stages was quite thrilling, particularly because I was not certain the game would work at all! People seemed to like the concept of the game, and commented to me afterwards how impressed they were with the quality of the graphics. The game still has a few bugs here and there, but I'm extremely pleased with the final prototype. It had been my goal to build a game at a GameJam and show it off to people on stage at the showcase event, and I believe The Mirror was a great first attempt for someone who had only two months prior started learning how to build games from scratch. 

Since The Mirror was a GameJam project, I can't see myself continuing work on it beyond fixing some of the larger bugs I've spotted since the showcase. Once those have been fixed, I plan to make the project repository public and release precompiled executables so people can try The Mirror for themselves as it was shown off for the first time. Now that I've also proven to myself that I can make games on my own without following a course, I plan to start new projects in Unreal in the coming months, but I'm mostly looking forward to the next Jam where I hope to build something bigger and better to top The Mirror.

_You can find The Mirror on my [GitHub](https://github.com/AnachronisticTech/Reflections-Unreal). You can mess around with the project and build it from source using a copy of Unreal Editor 4.23 or higher, or you can download a compiled release from [here](https://github.com/AnachronisticTech/Reflections-Unreal/releases)._