---
date: 26/09/2018
summary: I decided to start a blog to document my myriad projects and adventures, and linked it to my love of storytelling and developing for the web. Despite having access to templates and frameworks, I instead relied on my own knowledge and tenacity to build something unique, responsive, and accessible completely from the ground up.
type: project
tags: web;programming
---

# What have I been developing this week? – This blog (Web)

As much as I love technology and gadgets, I’ve always had a bit of a soft spot for writing. During my school days I earned some pretty good marks in GCSE English Literature and Language. I was also part of the school magazine, The Lion’s Eye. While I took subjects like Maths and Physics for A-Levels, I also took History which involved a lot of essays. At the time I didn’t know why writing appealed to me; I assumed that – in History – it was the historical detail which drew me in. For Literature it was the analysing of what the writer was trying to tell us. On reflection, however, the thing that jumps out at me when I think about writing is that it enables a story to be told. Whether it’s the story of what happened during last week’s performance of The Little Prince, or how the Israel situation was created, or how a group of people travelled and explored the stars, most writings – fiction and non-fiction alike – can be the conveyors of interesting stories.

Now, I’m not going to sit here and say I’m an accomplished or experienced writer; technology is my domain. However, I do love (listening to, and telling) a good story, and I love enabling stories to be told. This may be as simple as being with friends and doing something we can speak of to others in the future, or more complex like building an entire [interactive web-app just to organise my original character fiction](https://sto-database.co.uk). In a way, this blog serves a similar purpose in that I can document some of my experiences and exploits and share them with others at the same time. A friend of mine maintains a [similar blog](https://jorelali.github.io/blog/) on GitHub pages which inspired me to set up my own site, both as a journal of sorts and as a portfolio of projects. I asked if he could help me set up a site of my own, but he was abroad at the time, so I decided to put my web skills to use on this project.

I thought about skipping the development entirely by using a setup like WordPress or Blogger. I even spent an hour or so looking at possible premade themes, but I couldn’t find anything that fit my style, so I decided to build my own. Within another hour I had prototyped a basic HTML layout, marking out each major section with a unique – and quite garish – background colour. My design revolved around a main content area with a sidebar on the right, a title bar, and a menu that would stick to the top of the page when scrolling. As a desktop page, it looked reasonable (ignoring the horrible colours), though on mobile it would not do at all. Over the next two days I implemented responsive media queries in my stylesheets to accommodate for different resolutions. Most of the changes were minor, like adjusting some padding or margins, but the standout change was shifting the sidebar to the bottom of the page on mobile. I then prototyped some content and adjusted the styling to fit and settled on a subtle grey colour scheme with gentle hover animations.

Having recently learned JavaScript and jQuery, I decided to make my blog more accessible to users by adding a control bar with various options. I planned to implement a “dark mode" for night time reading, a “high contrast" mode, and options to enlarge the text and increase thickness. I added the control bar to the sidebar and wrote a function to switch stylesheets on the click of a button. The stylesheets were then split into different parts: one version contained all the styles of a page except for font and background colours, and the other two contained only the font and background colours, where one was a light theme and the other was dark. Clicking the button would swap the two colour stylesheets while leaving the other one in place allowing the user to toggle between light and dark modes. The issue, however, was that this didn’t work across pages; if you were to enable dark mode on a page then click a link, the new page would remain light, and the old page would revert to light if you were to navigate back. The solution I jumped to was to store a cookie in the browser with theme preferences. Using the [jscookie library](https://github.com/js-cookie/js-cookie), I set up a cookie with four digits "0000" that would be created if it didn’t already exist when a user visited the page. Switching to dark mode would change the first digit to "1". With each page set up to read the cookie if it existed (or create one otherwise) the preferences of the user would now be remembered with simple logic: if the first digit is "1", switch to dark mode. The remaining three digits would then be wired to the other controls.

I set up stylesheets for each of the other three controls, but "high contrast" and "bold text" caused me some headaches. Although I could easily set up light and dark high contrast stylesheets as I had originally planned, I had to update my cookie-reading script to consider the first two values in the cookie together so that a user could be in dark mode and switch to high contrast dark mode with just one click. The logic itself wasn’t difficult, it was just a few more conditional statements. What I hadn’t realised was that the cookie value can’t be updated; it must be re-set, meaning I had to disassemble the cookie, read the appropriate values, reassemble the contents of the cookie with new values for each digit when the buttons were pressed then overwrite the cookie. Again, this wasn’t difficult, though it was a bit of a pain to put together.

What did made things quite difficult was the "bold font" toggle. In CSS, different font weights can only be used if the font supports it, or if you supply each version of the font with the weight you would like to use. I had settled on using the [Futura font](https://typekit.com/fonts/futura-pt), which I believe looks incredibly stylish and modern. Unfortunately, I only had one font weight on my system from an install of an old Adobe program, and the other styles and weights each started at around $30 since it is a commercial style. For a quick side project, I quickly decided this was out of my budget and looked for a workaround. One promising solution on StackOverflow.com suggested using a 1-pixel text-shadow to make the text look thicker. I tried it in the visual inspector and it looked almost ok. The text was a bit fuzzy, but I could live with it. It wasn’t until later that a friend pointed me towards Google Fonts; an online library of free-to-use fonts for websites. Even though I wanted to keep Futura, I decided Google Fonts was a better option, so I eventually dropped Futura for a more suitable alternative.

With the JavaScript complete, I returned my attention to the styling of the site. While the site looked respectable on a traditional monitor, the responsive mobile view was a bit of a disaster. The Firefox responsive design mode indicated things were going well, but the live version running on my smartphone told a different story. It appeared as though the phone was trying to display the site as a desktop user would see it and seemed to be ignoring my media queries. I tweaked the stylesheets to better fit the mobile view, but to no avail. At the same time, the new control bar – which was in the sidebar on desktop screens – was now located at the bottom of the page on mobile, and the buttons were not particularly reliable since they were really small. I tried to find a solution, but nothing would work. After a couple of days bashing my head against the desk, I decided to think of the problem from another angle: businesses have responsive webpages and web-apps, but they are unlikely to have a site built from the ground up. They’d use a framework: a library of styles, classes, and elements that can be used to build a website that adheres to a set design language but that can be easily implemented and updated. Looking online through some of the more common frameworks, like Bootstrap and Foundation, I finally settled on UIKit, and tried to retrofit some of its features into the site. It initially seemed promising; on desktop elements started to feel more professionally designed (which, I guess, is the point) and more interactive. What’s more, it looked like it wouldn’t take too much effort to adapt my accessibility mechanics to fit the new theme.

Back on mobile, however, the story was still in much the same shape as before. Sure, the framework had improved things like visibility, but it hadn’t solved the original scaling problem. I trawled through UIKit’s extensive documentations and example snippets, but it quickly became clear to me that I wouldn’t find answers there. I was just about prepared to throw in the towel on the mobile front when I stumbled upon an old blog post about designing for the mobile web. As I scanned through a great deal jumped out at me as features and concepts I had implemented on my site. Sure, it felt good that I’d followed the right path, but it made me wonder even more why my site wouldn’t display as intended. Then a line of HTML stood out. It was a meta tag that one would place in the head of a page, and it referred to device width and content scaling. By this point it seemed like a long shot, though with no better ideas in view I decided to insert that line into one of my pages. As expected, refreshing the page on desktop changed nothing. I refreshed on my phone, also expecting nothing to change, but to my surprise, the page now looked like it belonged on mobile. I added the tag to the remaining pages and cycled through each one, thrilled that finally the site was displaying properly.

All that was left was to fix the control bar styling and to set up a method of uploading new content remotely. I opted to do the latter first, so the blog would be functional, then I could focus on polishing later. The backend of the blog would be powered with php. I’ve had quite a bit of experience with php over the past few years, and the system is not a large, complex one that is likely to change drastically in the future, so it seemed a reasonable choice. I quickly set up a MySQL database with a single table for storing each article, its title, thumbnail, category, etc., and retrofitted each page with php to retrieve the appropriate data. Two features were particularly noteworthy. First was a php function I adapted from a previous project that would match the contents of the article to a RegEx expression. The purpose of this was so I could indicate where an image or link would be within the article, and the function would replace it with the HTML necessary to create an image or a hyperlink. This meant I could add a caption to an image or embed a link within text without having to insert all the HTML myself. The second feature was a set of two pages on the site where I could add a new blog post or edit an existing post without needing to access files or databases. In effect, I built my own basic content management system with user authentication. Sure, it won’t be replacing WordPress any time soon, but it’s a neat little solution for a small site.

Lastly, I had to fix the mess that was the control bar. While it was decently placed in the sidebar on a large screen, placing it all the way at the bottom of the page on mobile was unacceptable. I toyed with having the controls always fixed to the bottom of the device screen, so they were always accessible like the menu, but this took up too much space from the content, so I looked for other ideas. What seemed most reasonable to me was to keep the controls near the menu, perhaps toggling their visibility from there. I moved the controls from the sidebar and ended up rebuilding the entire menu bar using HTML buttons instead of hyperlinks, but the final design looked much more presentable than its predecessors. I returned to the JavaScript to add in the toggle functionality and at the same time implemented a fix for tapping the buttons on mobile instead of clicking. Now the controls were situated right below the menu links but hidden until called for by tapping or clicking an icon resembling a gear. Also, having rebuilt both the menu and the controls, each button was now much larger, making it easier for touchscreen users and people with a lack of fine motor control to navigate and change their settings.

With that, the blog project was finished. Like all my projects it still gets tweaked and updated from time to time, but overall it is functional, stylish (at least, I think it is), and allows me to continue telling stories about my life and what I do with it. I’ve already been asked once or twice why I didn’t just use GitHub pages or whatever other system, and while I tell them I wanted to do it myself since I have the skills and abilities – which is a major reason for why I created this site – the other reason is that imagine how dull a story the alternative would have been.

The End.